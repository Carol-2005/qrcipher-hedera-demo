import { ContractCreateFlow } from "@hashgraph/sdk";

export default async function createContract(client) {
    try {
        const bytecode =
          "6080604052348015600e575f5ffd5b50335f5f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550610b038061005b5f395ff3fe608060405234801561000f575f5ffd5b5060043610610049575f3560e01c80623381421461004d578063629d0bf614610069578063a81caae314610099578063e2be292f146100c9575b5f5ffd5b6100676004803603810190610062919061062f565b6100f9565b005b610083600480360381019061007e91906106e1565b610295565b6040516100909190610758565b60405180910390f35b6100b360048036038101906100ae9190610771565b61045e565b6040516100c09190610758565b60405180910390f35b6100e360048036038101906100de9190610771565b61048f565b6040516100f091906108b8565b60405180910390f35b3373ffffffffffffffffffffffffffffffffffffffff165f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610187576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161017e90610958565b60405180910390fd5b5f5f90505b8383905081101561028f575f60018585848181106101ad576101ac610976565b5b90506020028101906101bf91906109af565b6040516101cd929190610a4d565b90815260200160405180910390209050805f0160405180604001604052808573ffffffffffffffffffffffffffffffffffffffff16815260200142815250908060018154018082558091505060019003905f5260205f2090600202015f909190919091505f820151815f015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010155505050808060010191505061018c565b50505050565b5f3373ffffffffffffffffffffffffffffffffffffffff165f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610324576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161031b90610958565b60405180910390fd5b5f60018585604051610337929190610a4d565b90815260200160405180910390205f01805490501161038b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161038290610aaf565b60405180910390fd5b5f6001858560405161039e929190610a4d565b90815260200160405180910390209050805f0160405180604001604052808573ffffffffffffffffffffffffffffffffffffffff16815260200142815250908060018154018082558091505060019003905f5260205f2090600202015f909190919091505f820151815f015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010155505060019150509392505050565b5f5f60018484604051610472929190610a4d565b90815260200160405180910390205f018054905011905092915050565b6060600183836040516104a3929190610a4d565b90815260200160405180910390205f01805480602002602001604051908101604052809291908181526020015f905b82821015610560578382905f5260205f2090600202016040518060400160405290815f82015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600182015481525050815260200190600101906104d2565b50505050905092915050565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f5f83601f84011261059557610594610574565b5b8235905067ffffffffffffffff8111156105b2576105b1610578565b5b6020830191508360208202830111156105ce576105cd61057c565b5b9250929050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6105fe826105d5565b9050919050565b61060e816105f4565b8114610618575f5ffd5b50565b5f8135905061062981610605565b92915050565b5f5f5f604084860312156106465761064561056c565b5b5f84013567ffffffffffffffff81111561066357610662610570565b5b61066f86828701610580565b935093505060206106828682870161061b565b9150509250925092565b5f5f83601f8401126106a1576106a0610574565b5b8235905067ffffffffffffffff8111156106be576106bd610578565b5b6020830191508360018202830111156106da576106d961057c565b5b9250929050565b5f5f5f604084860312156106f8576106f761056c565b5b5f84013567ffffffffffffffff81111561071557610714610570565b5b6107218682870161068c565b935093505060206107348682870161061b565b9150509250925092565b5f8115159050919050565b6107528161073e565b82525050565b5f60208201905061076b5f830184610749565b92915050565b5f5f602083850312156107875761078661056c565b5b5f83013567ffffffffffffffff8111156107a4576107a3610570565b5b6107b08582860161068c565b92509250509250929050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b6107ee816105f4565b82525050565b5f819050919050565b610806816107f4565b82525050565b604082015f8201516108205f8501826107e5565b50602082015161083360208501826107fd565b50505050565b5f610844838361080c565b60408301905092915050565b5f602082019050919050565b5f610866826107bc565b61087081856107c6565b935061087b836107d6565b805f5b838110156108ab5781516108928882610839565b975061089d83610850565b92505060018101905061087e565b5085935050505092915050565b5f6020820190508181035f8301526108d0818461085c565b905092915050565b5f82825260208201905092915050565b7f4f6e6c792074686520636f6e7472616374206f776e65722063616e2063616c6c5f8201527f20746869732066756e6374696f6e000000000000000000000000000000000000602082015250565b5f610942602e836108d8565b915061094d826108e8565b604082019050919050565b5f6020820190508181035f83015261096f81610936565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f5f833560016020038436030381126109cb576109ca6109a3565b5b80840192508235915067ffffffffffffffff8211156109ed576109ec6109a7565b5b602083019250600182023603831315610a0957610a086109ab565b5b509250929050565b5f81905092915050565b828183375f83830152505050565b5f610a348385610a11565b9350610a41838584610a1b565b82840190509392505050565b5f610a59828486610a29565b91508190509392505050565b7f50726f64756374206e6f7420666f756e640000000000000000000000000000005f82015250565b5f610a996011836108d8565b9150610aa482610a65565b602082019050919050565b5f6020820190508181035f830152610ac681610a8d565b905091905056fea2646970667358221220e85601a01c0dd5ee5c70ca075400c4290bfab163fc372d438e5941579fa30c4164736f6c634300081e0033";

        const createContract = new ContractCreateFlow()
            .setGas(4000000)
            .setBytecode(bytecode);

        const createContractTx = await createContract.execute(client);
        const createContractRx = await createContractTx.getReceipt(client);
        const contractId = createContractRx.contractId;

        console.log(`Contract created with ID: ${contractId} \n`);

        return contractId;
    } catch (err) {
        console.log(err);
        throw new Error('Contract creation Failed');
    }
}